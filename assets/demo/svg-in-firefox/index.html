
<!DOCTYPE html><html class=''>
<head><meta charset='UTF-8'><meta name="robots" content="noindex">

<style class="cp-pen-styles">BODY {
  font: 16px/1.4 Arial, sans-serif;
}


svg {
    border: 3px solid red;
    }

H3 {
  margin: 0 0 1em;
  font-size: 1.3em;
  color: steelblue;
}

button {
  margin: .5em 0;
  cursor: pointer;
  font-size: 1.6em;
}

.layout {
  width: 450px;
  margin: 1em auto;
  text-align: center;
}

.wrapper {
  margin: 1em;
  padding: 1em;
  border: 2px solid #CCC;
}
</style></head><body>
<!--
*******

Test it in Firefox to see the whole problem

*******
-->

<div class="layout">
  <div class="wrapper">
    <h3>Original SVG</h3>

    <svg id="old-svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" xml:base="http://yoksel.github.io/assets/demo/svg-in-firefox/index.html" width="250" height="100">
        <symbol id="test-use">
          <g>
            <circle r="50" cx="50" cy="50" fill="orangered"></circle>
            <text x="50" y="50%" text-anchor="middle" fill="#FFF">Symbol</text>
          </g>
        </symbol>
        <g>
          <circle r="50" cx="50" cy="50" fill="skyblue"></circle>
          <text x="50" y="50%" dy="-.5em" text-anchor="middle" fill="#FFF">Shape</text>
        </g>
        <use xlink:href="#test-use" transform="translate(150)"></use>
  </svg>
  </div>

  <button id="button">Add &lt;base&gt; and clone shape</button>

  <div class="wrapper">
    <h3>Copy of original SVG added after new base</h3>
    <div id="recipient">

    </div>
  </div>

<script>
    var button = document.querySelector("#button");
    var head = document.querySelector("head");
    var oldSvg = document.querySelector("#old-svg");
    var newSvg = oldSvg.cloneNode(true);

    var recipient = document.querySelector("#recipient");

    button.onclick = function(){
      console.log("button is clicked");
      var baseElem = document.createElement("base");
      baseElem.setAttribute("href","/new-url/");

      head.appendChild(baseElem);

      recipient.appendChild(newSvg);
    }
</script>
</body></html>