function pixelGlass(){"use strict";function t(){u(),e(),p()}function e(){var t=y.documentElement;if(void 0!==y.body.dataset.hasStickyPoint){var e=y.querySelector(".sticky-point");e&&!localStorage["pg-released"]&&(t=e),P.state="off"}m=y.createElement("div"),m.classList.add(g),t.appendChild(m);var l=["top","right","bottom","left"];l.forEach(function(t){var e=i(t,"");e&&(m.style[t]=e)}),o()}function o(){l(E),l(S),a(L),n()}function l(t){var e=(t.listName,t.itemName),o=t.elemTag,l=t.elemText,a=t.type,n=t.list,i=(t.action,P[e]),u=t.attrs,p=n.indexOf(i),v=t.canDisableAll,h=e,x=y.createElement(o);if(x.classList.add(g+"__control",g+"__control--"+a),x.setAttribute("type",a),x.setAttribute("id",h),x.dataset.stateNum=p,u)for(var A in u)x.setAttribute(A,u[A]);"button"===o&&(x.innerHTML=l),v||b.push(x),m.appendChild(x),x.onclick=function(){t.target&&(p=+!p,i=n[p],x.dataset.stateNum=p,t.target.elem.dataset[e]=i,c(e,i),v&&v===!0&&("off"===i?(d(),r()):(f(),s())))}}function a(t){var e=t.itemName,o=t.attrs,l=t.type,a=t.setAttr,n=t.canDisableAll,r=e,s=y.createElement("input");s.classList.add(g+"__control",g+"__control--"+l),s.setAttribute("type",l),s.setAttribute("id",r);for(var i in o)s.setAttribute(i,o[i]);s.setAttribute("value",P[e]),n||b.push(s),m.appendChild(s),s.oninput=function(){"style"===a&&(t.target.elem.style[e]=this.value,c(e,this.value))}}function n(){var t=y.createElement("button");t.classList.add(g+"__control",g+"__control--drag-n-drop"),t.setAttribute("type","button"),m.appendChild(t),t.onmousedown=function(){var t=(this.offsetTop,m.clientWidth-this.clientWidth),e=getComputedStyle(m);m.style.top=e.top,m.style.left=e.left,m.style.right="auto",m.style.bottom="auto",y.onmousemove=function(e){var o=e.clientX-t+"px",l=e.clientY+"px";m.style.left=o,m.style.top=l}},t.onmouseup=function(){var t=getComputedStyle(m),e=+t.left.replace(/px/,""),o=+t.right.replace(/px/,""),l=+t.top.replace(/px/,""),a=+t.bottom.replace(/px/,"");e>o?(c("left","auto"),c("right",t.right),m.style.right=t.right,m.style.left="auto"):(c("left",t.left),c("right","auto")),l>a?(c("top","auto"),c("bottom",t.bottom),m.style.bottom=t.bottom,m.style.top="auto"):(c("top",t.top),c("bottom","auto")),y.onmousemove=null}}function r(){b.forEach(function(t){t.setAttribute("disabled","")})}function s(){b.forEach(function(t){t.removeAttribute("disabled")})}function i(t,e){var o=[v,t].join("-"),l=localStorage[o];return l?l:e}function c(t,e){var o=[v,t].join("-");localStorage[o]=e}function u(){var t=(y.createElement("style"),y.createElement("link"));t.setAttribute("rel","stylesheet"),t.setAttribute("href","../assets/js/pixel-glass/styles.css"),y.head.appendChild(t)}function p(){for(var t in A){var e=A[t],o=P[t];"data"===e.attr&&(e.elem.dataset[t]=o)}"off"===P.state&&r()}function f(){for(var t in A){var e=A[t],o=P[t];"style"===e.attr&&(e.elem.style[t]=o)}}function d(){for(var t in A){var e=A[t];"style"===e.attr&&(e.elem.style[t]="")}}var m,y=document,g="controls-panel",b=[],v="pg",h=["none","invert"],x=["off","on"],P={state:i("state",x[1]),filter:i("filter",h[0]),opacity:i("opacity",.5)},A={state:{elem:y.documentElement,attr:"data"},filter:{elem:y.body,attr:"data"},opacity:{elem:y.body,attr:"style"}},E={elemTag:"button",elemText:"on",listName:"states",itemName:"state",target:A.state,type:"button",list:x,canDisableAll:!0,attrs:{tabindex:1}},S={elemTag:"button",elemText:"invert",listName:"filters",itemName:"filter",target:A.filter,type:"button",list:h,attrs:{tabindex:2}},L={itemName:"opacity",type:"number",target:A.opacity,setAttr:"style",attrs:{min:0,max:1,step:.1,tabindex:3}};t()}function runDemo(){function t(){controlsPanel=a.querySelector(".controls-panel"),controlsPanel?(l=a.querySelector(".sticky-container"),l.classList.add("sticky-container--filled"),controlsPanel.addEventListener("click",e)):setTimeout(t,500)}function e(){var t=controlsPanel.offsetTop-window.scrollY+controlsPanel.offsetParent.offsetTop,n=controlsPanel.offsetLeft-window.scrollX+controlsPanel.offsetParent.offsetLeft;controlsPanel.style.position="fixed",controlsPanel.style.top=t+"px",controlsPanel.style.left=n+"px",controlsPanel.style.right="auto",controlsPanel.style.bottom="auto",o(),a.documentElement.appendChild(controlsPanel),l.classList.add("sticky-container--collapse"),controlsPanel.removeEventListener("click",e)}function o(){var t=getComputedStyle(controlsPanel),e=+t.left.replace(/px/,""),o=+t.right.replace(/px/,""),l=+t.top.replace(/px/,""),a=+t.bottom.replace(/px/,"");e>o&&(controlsPanel.style.right=t.right,controlsPanel.style.left="auto"),l>a&&(controlsPanel.style.bottom=t.bottom,controlsPanel.style.top="auto")}var l,a=document;clearLocalStorage(),localStorage["pg-released"]||t()}function clearLocalStorage(){var t=["pg-filter","pg-opacity","pg-bottom","pg-top","pg-left","pg-right","pg-state","pg-released"];t.forEach(function(t){delete localStorage[t]})}window.onload=function(){pixelGlass(),runDemo()};