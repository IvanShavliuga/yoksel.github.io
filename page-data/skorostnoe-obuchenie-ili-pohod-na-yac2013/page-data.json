{"componentChunkName":"component---src-templates-blog-post-js","path":"/skorostnoe-obuchenie-ili-pohod-na-yac2013","result":{"data":{"markdownRemark":{"html":"<p>2 октября прошла конференция <a href=\"http://tech.yandex.ru/events/yac/2013/\">Yet another Conference 2013</a> от Яндекса. Было много интересного, но самое яркое впечатление оставил <a href=\"https://github.com/yandex-cs/yac2013\">конкурс по ускорению отрисовки страницы</a>.<!--more--></p>\n<p>Задание было забористое, с подковырками. На выполнение около суток.\nПомимо совершенно очевидных вещей в нём было несколько хорошо спрятанных секретов. Некоторые из них заставили поломать голову в процессе решения задачи, некоторые не отпускали и на следующий день : )</p>\n<p>Одно из таких — оптимизация шрифтов.</p>\n<p>Клонируем себе проект, открываем папочку со шрифтами и видим там слонов:</p>\n<img src=\"//img-fotki.yandex.ru/get/9358/5091629.98/0_7b9a4_f69346d4_L.png\" alt=\"Font Elefants\" />\n<p>Это шрифт PT Sans, который можно скачать бесплатно, например, прямо с сайта производителя: <a href=\"http://www.paratype.ru/public/\">paratype.ru/public/</a>. Там же предлагается вместо скачивания шрифта подключить его через <a href=\"http://www.google.com/fonts\">google.com/fonts</a>.</p>\n<p>Простейшая оптимизация заключается в отключении неиспользуемого шрифта. В файле подключается 4 шрифта, и один из них не используется (PT Sans Narrow Bold).</p>\n<p>А вот дальше начинается самое интересное. На <a href=\"http://www.paratype.ru/public/\">paratype.ru</a> написано, что:</p>\n<blockquote>ПТ Санс, ПТ Сериф и ПТ Моно поддерживают обширный список языков Евразии на латинской и кириллической основе. <...>\n<p>Важной особенностью шрифтов является поддержка всех официальных и большинства титульных языков народов и народностей РФ, которые приведены ниже. </blockquote></p>\n<p>И ниже список из 54-х языков. Таким образом, просто подключая шрифт как есть, мы за компанию получаем кучу символов, которые врядли нам когда-нибудь потребуются.</p>\n<p>И вот теперь самое время воспользоваться <a href=\"http://www.google.com/fonts\">google.com/fonts</a>.</p>\n<p>Находим там PT Sans, выбираем обычный и жирный шрифт (наклонный в задании не используется), выбираем кириллицу, получаем код и скачиваем файлы по ссылкам, чтобы оценить вес.</p>\n<p>На выходе два файла названные абракадаброй и весом 127 и 137кб (против 224 и 238кб).\nУже лучше, но и это не предел.</p>\n<p>В разделе выбора языков есть ссылка <a href=\"https://developers.google.com/fonts/docs/getting_started#Subsets\">Read more on how to use subsets</a>. На странице по ссылке содержится ценный совет: чтобы использовать только нужный набор символов, его можно задать в URL через параметр text:</p>\n<p><em><a href=\"http://fonts.googleapis.com/css?family=Inconsolata\">http://fonts.googleapis.com/css?family=Inconsolata</a><strong>&#x26;text=Hello</strong></em></p>\n<p>Параметр subset в этом случае задавать не нужно.</p>\n<p><strong>Результат:</strong> PT Sans Bold весит всего 7.6kb. Он используется только в заголовке, и символов для него нужно совсем немного. 7.6 против 238 килобайт!</p>\n<p>Аналогично делаем для нежирного начертания, в параметр text вводим все кириллические символы, латиницу и цифры. В итоге получаем файл весом около 15-ти килобайт. 15 вместо 224kb!</p>\n<p>Отличный выигрыш в производительности и весе страницы дает этот простой как лом способ, жаль, что я не смогла им воспользоваться на конкурсе.</p>\n<p>Если бы шрифта не было на гугле, пришлось бы воспользоваться редактором шрифта, а это уже совсем другая история.</p>\n<p>Спасибо Яндексу за интересный конкурс, благодаря ему мы за очень короткое время узнали много нового, не только про шрифты. Надеемся, что будут другие, не менее увлекательные и полезные, и, желательно, не по ночам : )</p>\n<p><strong>Ссылки по теме:</strong>\n<a href=\"http://habrahabr.ru/post/130172/\">habrahabr.ru/post/130172/</a></p>\n<p><strong>Видео по теме:</strong>\nотличный ролик про оптимизацию шрифта на <a href=\"http://www.fontsquirrel.com/\">белке-шрифтелке</a>.\nДля конкурса этот способ не подошел, потому что сайт не захотел закачивать PT Sans, аргументируя это просьбой правообладателей. При этом сам шрифт можно свободно скачать с сайта, а вот модифицировать его — нет.</p>\n<iframe width=\"640\" height=\"480\" src=\"//www.youtube.com/embed/G5ZmSVK7CHo\" frameborder=\"0\" allowfullscreen></iframe>","frontmatter":{"title":"Скоростное обучение или поход на YAC2013","desc":null,"image":null,"customCSS":null,"customJs":null,"tags":["fonts"],"layout":null,"links":null}}},"pageContext":{"slug":"skorostnoe-obuchenie-ili-pohod-na-yac2013","date":"04/10/2013","url":"/skorostnoe-obuchenie-ili-pohod-na-yac2013","type":"post","includeContent":"","isArchived":true,"previous":{"frontmatter":{"title":"Клеточки на CSS"},"fields":{"url":"/cells","type":"post","isArchived":true}},"next":{"frontmatter":{"title":"Цветовой круг на CSS"},"fields":{"url":"/tsvetovoj-krug-na-css","type":"post","isArchived":true}}}}}