{"componentChunkName":"component---src-templates-blog-post-js","path":"/svg-masks","result":{"data":{"markdownRemark":{"html":"<p>SVG-маски — это очень богатая тема. В SVG есть два способа обрезать один элемент с помощью другого: это <b>clip-path</b> и <b>mask</b>. <b>Clip-path</b> для обрезки использует только контуры фигур, игнорируя заливки и обводки, с <b>масками</b> всё гораздо интереснее: в них учитываются и заливки, и обводки, и яркость содержимого.<!--more--> Более того, в маску можно вставить растровое изображение, и тогда для создания маски будут использоваться его темные и светлые участки.</p>\n<p>Код самой простой маски выглядит вот так:</p>\n<div class=\"gatsby-highlight\" data-language=\"markup\"><pre class=\"language-markup\"><code class=\"language-markup\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>mask</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>mask<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n  <span class=\"token comment\">&lt;!-- содержимое маски --></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>mask</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>Добавим пару фигур для примера:</p>\n<div class=\"gatsby-highlight\" data-language=\"markup\"><pre class=\"language-markup\"><code class=\"language-markup\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>mask</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>mask<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>g</span> <span class=\"token attr-name\">stroke</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>gray<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">stroke-width</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>12<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">fill</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>white<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>circle</span> <span class=\"token attr-name\">cx</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>33%<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">cy</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>30%<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">r</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>20%<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>circle</span> <span class=\"token attr-name\">cx</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>52%<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">cy</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>62%<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">r</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>32%<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>g</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>mask</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>Картинка + маска = результат:</p>\n<iframe height=\"420\"\n      style=\"width: 100%\"\n      title=\"no title\"\n      src=\"http://codepen.io/yoksel/embed/JGyeZj/?&default-tab=result\"\n    ></iframe>\n<p>Код маски задаётся внутри SVG и может быть использован как внутри этого элемента, так и в других SVG-элементах на той же странице. Также есть возможность использовать SVG-маски в CSS (например, <code>mask: url(#mymask)</code>), но на данный момент это работает только в Firefox.</p>\n<p>Единственным обязательными атрибутом элемента <code>mask</code> является <code>id</code> — это идентификатор, который нужен для подключения маски к элементу, но есть и другие атрибуты:</p>\n<h2 id=\"maskUnits\">maskUnits</h2>\n<p>Определяет, какая система координат будет использоваться для атрибутов <code>x</code>, <code>y</code>, <code>width</code> и <code>height</code>, то есть для внешних размеров и координат.</p>\n<p>Возможные значения:</p>\n<p><code>userSpaceOnUse</code> — используется текущая система координат элемента, к которому применяется маска. Если не применялись трансформации, соответствует системе координат всего документа (например, <code>width: 100%</code> будет равно ширине всего SVG-элемента).</p>\n<p><code>objectBoundingBox</code> — атрибуты <code>x</code>, <code>y</code>,</p>\n<p><code>width</code> и <code>height</code> задаются в частях или процентах от размеров элемента, к которому применяется маска (<code>width: 100%</code> будет равно ширине элемента с маской).</p>\n<p>Если <code>maskUnits</code> не задано, используется значение <code>objectBoundingBox</code>.</p>\n<p>Попереключайте значения <code>maskUnits</code> и посмотрите как меняется поведение маски:</p>\n<iframe height=\"530\"\n      style=\"width: 100%\"\n      title=\"no title\"\n      src=\"http://codepen.io/yoksel/embed/MKErEN/?&default-tab=result\"\n    ></iframe>\n<p>С <code>objectBoundingBox</code> 50% рассчитываются относительно элемента, с <code>userSpaceOnUse</code> — относительно всего документа.</p>\n<p>С <code>objectBoundingBox</code> координаты и размеры можно задавать и в частях от целого, и в процентах, то есть <code>.5</code> здесь то же самое, что и <code>50%</code>.\nПри <code>userSpaceOnUse</code> будут работать только процентные значения либо значения в абсолютных единицах, например, в пикселях.</p>\n<h2 id=\"maskContentUnits\">maskContentUnits</h2>\n<p>Определяет, какая система координат будет использоваться для содержимого маски, то есть для внутренних размеров и координат.</p>\n<p>Возможные значения:</p>\n<p><code>userSpaceOnUse</code> — для содержимого маски используется текущая система координат элемента, к которому применяется маска (без трансформаций соответствует системе координат всего SVG-элемента).</p>\n<p><code>objectBoundingBox</code> — для содержимого маски используется система координат относительно элемента, все размеры и расстояния рассчитываются исходя из размеров элемента с маской.</p>\n<p>Если атрибут <code>maskContentUnits</code> не задан, используется значение <code>userSpaceOnUse</code>.</p>\n<iframe height=\"530\"\n      style=\"width: 100%\"\n      title=\"no title\"\n      src=\"http://codepen.io/yoksel/embed/BjmXRw/?&default-tab=result\"\n    ></iframe>\n<p>Обратите внимание, что при <code>objectBoundingBox</code> фигуры могут искажаться (в данном случае круг превращается в эллипс).</p>\n<p>В отличие от <code>maskUnits</code>, при <code>objectBoundingBox</code> координаты и размеры можно задавать только в частях от целого (возможные значения — от 0 до 1), значения в процентах работать не будут.</p>\n<p>То есть не то чтобы совсем не будут — процентные значения будут рассчитываться относительно размеров всего SVG, и в этом случае <code>.5</code> совсем не равно <code>50%</code>, потому что <code>.5</code> — это половина элемента с маской, а <code>50%</code> — это уже половина всего SVG-изображения. И если вы будете менять значения <code>maskContentUnits</code>, вам придётся каждый раз переписывать размеры и координаты содержимого маски.</p>\n<p>Мне не сразу удалось понять как это работает, спасибо <a href=\"https://twitter.com/SelenIT2\">SelenIT2</a> и <a href=\"https://twitter.com/AmeliasBrain\">AmeliasBrain</a> за то, что помогли разобраться в вопросе.</p>\n<h2 id=\"x-and-y\">X и Y</h2>\n<p>Определяют, где будет находиться верхний левый угол отображаемой области маски. Содержимое маски при этом не сдвигается.</p>\n<p>Для <code>x</code> и <code>y</code> значение по умолчанию <code>10%</code>.</p>\n<iframe height=\"530\"\n      style=\"width: 100%\"\n      title=\"no title\"\n      src=\"http://codepen.io/yoksel/embed/MKEydO/?&default-tab=result\"\n    ></iframe>\n<h2 id=\"width-and-height\">Width и height</h2>\n<p>Определяют, где будет находиться нижний правый угол отображаемой области маски. Внешние размеры маски не влияют на размеры её содержимого.</p>\n<p>Для <code>width</code> и <code>height</code> значение по умолчанию <code>120%</code>.</p>\n<iframe height=\"530\"\n      style=\"width: 100%\"\n      title=\"no title\"\n      src=\"http://codepen.io/yoksel/embed/xZLBwM/?&default-tab=result\"\n    ></iframe>\n<p>Вместе параметры <code>x</code>,<code>y</code>, <code>width</code> и <code>height</code> работают как <code>viewBox</code>, то есть определяют размеры отображаемой области маски:</p>\n<iframe height=\"530\"\n      style=\"width: 100%\"\n      title=\"no title\"\n      src=\"http://codepen.io/yoksel/embed/BjOovr/?&default-tab=result\"\n    ></iframe>\n<p>Знание всех этих технических подробностей позволит не сойти с ума при работе с масками и их своеобразными системами координат.</p>\n<h2 id=\"demos\">Примеры использования</h2>\n<p>Маски можно (и нужно) использовать для создания визуальных эффектов. Правда, мне пока не приходилось использовать маски в реальных проектах, но экспериментировать с ними очень увлекательно.\nВнимание: лучше всего демо отображаются в Opera и Chrome. В Firefox могут не работать некоторые анимации, в Safari воообще беда.</p>\n<p>Например, с помощью маски можно вырезать фигуру нужной формы, анимировать её содержимое и собрать <a href=\"https://codepen.io/yoksel/full/PPMvxy\">калейдоскоп</a>.</p>\n<p>Или привязать фигуру внутри маски к координатам курсора и получить фонарик (наведите курсор на демо):</p>\n<iframe height=\"530\"\n      style=\"width: 100%\"\n      title=\"no title\"\n      src=\"http://codepen.io/yoksel/embed/BjRVew/?&default-tab=result\"\n    ></iframe>\n<p>Ещё интереснее заворачивать в маску растровые изображения (в отличие от векторных, они могут быть любой сложности, с множеством деталей и мелких штрихов):</p>\n<iframe height=\"630\"\n      style=\"width: 100%\"\n      title=\"no title\"\n      src=\"http://codepen.io/yoksel/embed/mVVVyp/?&default-tab=result\"\n    ></iframe>Автор <a href=\"https://img-fotki.yandex.ru/get/16173/5091629.a4/0_8d5ef_68a0b9a4_orig\">совы</a>: <a href=\"http://www.bioworkz.com/\" target=\"_blank\">BioWorkZ</a>\n<p>Подобное можно сделать с любой чёрно-белой картинкой, и для этого даже не придется открывать графический редактор.</p>\n<iframe height=\"420\"\n      style=\"width: 100%\"\n      title=\"no title\"\n      src=\"http://codepen.io/yoksel/embed/EPYwMg/?&default-tab=result\"\n    ></iframe>\n<p>Изображение в маске может быть анимированным (и заливка для него тоже!):</p>\n<iframe height=\"420\"\n      style=\"width: 100%\"\n      title=\"no title\"\n      src=\"http://codepen.io/yoksel/embed/MKgppV/?&default-tab=result\"\n    ></iframe><i>(Если птица показалась вам знакомой, <a href=\"http://codepen.io/collection/XRPbWp/\">вам не показалось</a>.)</i>\n<p>Также с помощью маски можно сделать анимированную заливку для текста:</p>\n<iframe height=\"420\"\n      style=\"width: 100%\"\n      title=\"no title\"\n      src=\"http://codepen.io/yoksel/embed/WbvwpR/?&default-tab=result\"\n    ></iframe>\n<p>А ещё можно динамически менять векторное содержимое маски и сделать исчезающие надписи или, например, часы:</p>\n<iframe height=\"420\"\n      style=\"width: 100%\"\n      title=\"no title\"\n      src=\"http://codepen.io/yoksel/embed/PZdWpm/?&default-tab=result\"\n    ></iframe>\n<p>Или эффектную фотогалерею (<a href=\"/animated-svg-mask/\">туториал</a>):</p>\n<iframe height=\"650\"\n      style=\"width: 100%\"\n      title=\"no title\"\n      src=\"http://codepen.io/yoksel/embed/eIxmr/?&default-tab=result\"\n    ></iframe>\n<p>Маски удивительные, играться с ними можно до бесконечности. И, по-моему, они несут в себе огромный потенциал, который мы только-только начинаем открывать.</p>","frontmatter":{"title":"SVG-маски","desc":"SVG-маски — это очень богатая тема. В SVG есть два способа обрезать один элемент с помощью другого: это clip-path и mask. Clip-path для обрезки использует только контуры фигур, с масками всё интереснее: в них учитываются и заливки, и обводки, и яркость содержимого.","image":"https://img-fotki.yandex.ru/get/68668/5091629.a4/0_8da0a_91b5fc57_-1-orig","customCSS":null,"customJs":null,"tags":["svg","masks"],"layout":null,"links":[{"desc":null,"name":"Clip path","url":"https://www.w3.org/TR/SVG/masking.html#EstablishingANewClippingPath"},{"desc":null,"name":"Masking","url":"https://www.w3.org/TR/SVG/masking.html#Masking"},{"desc":null,"name":"CSS и SVG маски (статья)","url":"/css-and-svg-masks/"},{"desc":null,"name":"Все виды масок в CSS и SVG (демо)","url":"http://codepen.io/yoksel/full/fsdbu/"},{"desc":null,"name":"Анимированные SVG-маски","url":"/animated-svg-mask/"},{"desc":null,"name":"SVG: полезные ссылки","url":"/pages/svg-links/"},{"desc":null,"name":"Множество демо с масками на Codepen","url":"http://codepen.io/search/pens/?limit=all&q=svg+mask"}]}}},"pageContext":{"slug":"svg-masks","date":"04/02/2016","url":"/svg-masks","type":"post","includeContent":"","isArchived":false,"previous":{"frontmatter":{"title":"Умная прокрутка со Scroll Snap Points"},"fields":{"url":"/scroll-snap","type":"post","isArchived":false}},"next":{"frontmatter":{"title":"Весёлая консолька"},"fields":{"url":"/funny-little-console","type":"post","isArchived":false}}}}}