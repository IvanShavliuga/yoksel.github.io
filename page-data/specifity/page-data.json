{"componentChunkName":"component---src-templates-blog-post-js","path":"/specifity","result":{"data":{"markdownRemark":{"html":"<p>Все CSS-селекторы имеют свой вес, который определяет как взаимодействуют одинаковые свойства, заданные в разных местах кода одному и тому же элементу.<!--more--></p>\n<p>Иногда это может создавать трудности, когда свойство, объявленное ниже в коде, перекрывается тем, что объявленно выше, потому что селектор первого более специфичен (имеет больший вес).</p>\n<p>Вот пример проблемы. Есть див с <code>id=\"container\"</code>, внутри него некоторый текст и список ссылок.</p>\n<div class=\"gatsby-highlight\" data-language=\"markup\"><pre class=\"language-markup\"><code class=\"language-markup\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>container<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a</span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>#<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>link in P<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span>\n\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>ul</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>list<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a</span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>#<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>Link1<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a</span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>#<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>Link2<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>ul</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>Сначала задаём всем ссылкам внутри <code>#container</code> оранжевый фон:</p>\n<div class=\"gatsby-highlight\" data-language=\"css\"><pre class=\"language-css\"><code class=\"language-css\"><span class=\"token selector\">#container A</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">background</span><span class=\"token punctuation\">:</span> orange<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>А потом, чтобы в списке <code>.list</code> внутри контейнера ссылки имели зелёный фон, ниже дописываем такое:</p>\n<div class=\"gatsby-highlight\" data-language=\"css\"><pre class=\"language-css\"><code class=\"language-css\"><span class=\"token selector\">.list A</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">background</span><span class=\"token punctuation\">:</span> mediumspringgreen<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Казалось бы, ссылки в тексте должны получить оранжевый фон, а ссылки в списке — зеленый, но нет:</p>\n<iframe class=\"live-snippet\" style=\"height: 300px\" src=\"../assets/demo/specifity/demo_1.html?output\"></iframe>\n<p>Почему так? Потому, что первый селектор содержит ID и перевешивает второй, то есть:</p>\n<p><code>#container A</code> <b>></b> <code>.list A</code></p>\n<h2 id=\"specifity\">Вес селектора</h2>\n<p>Специфичность селектора рассчитывается по 4-м позициям:</p>\n<iframe class=\"live-snippet\" style=\"height: 220px\" src=\"../assets/demo/specifity/demo_2.html?output\"></iframe>\n<p>Для каждого из них подсчитывается количество подходящих элементов в селекторе, и это число помещается в соответствующую позицию.</p>\n<p><b>Пример:</b></p>\n<iframe class=\"live-snippet\" style=\"height: 500px\" src=\"../assets/demo/specifity/demo_3.html?output\"></iframe>\n<p><b>Вес селекторов</b> (по убыванию):</p>\n<p><span class=\"wrapper-with-dottes\"><code>style=\"\"</code></span><code class=\"specifity\"><b>1</b>,0,0,0</code></p>\n<p><span class=\"wrapper-with-dottes\"><code>#id</code></span><code class=\"specifity\">0,<b>1</b>,0,0</code></p>\n<p><span class=\"wrapper-with-dottes\"><code>.class</code></span><code class=\"specifity\">0,0,<b>1</b>,0</code></p>\n<p><span class=\"wrapper-with-dottes\"><code>[attr=value]</code></span><code class=\"specifity\">0,0,<b>1</b>,0</code></p>\n<p><span class=\"wrapper-with-dottes\"><code>LI</code></span><code class=\"specifity\">0,0,0,<b>1</b></code></p>\n<p><span class=\"wrapper-with-dottes\"><code>*</code></span><code class=\"specifity\">0,0,0,0</code></p>\n<p>У стилей, заданных в атрибуте <code>style</code>, на первой позиции будет единица — <code class=\"specifity\"><b>1</b>,0,0,0</code>. Это самая высокая специфичность, которая перевешивает свойства, заданные другими способами.</p>\n<p>Переопределить стили, заданные в <code>style</code>, можно дописав <code>!important</code> к значению свойства в таблице стилей.</p>\n<p>Обратный вариант — универсальный селектор <code>*</code>, он не имеет веса: <code class=\"specifity\">0,0,0,0</code>.</p>\n<p><b>Примеры:</b></p>\n<p><span class=\"wrapper-with-dottes\"><code>LI</code></span><code class=\"specifity\">0,0,0,<b>1</b></code> — селектор по тегу</p>\n<p><span class=\"wrapper-with-dottes\"><code>UL LI</code></span><code class=\"specifity\">0,0,0,<b>2</b></code> — селектор c двумя тегами весит больше, чем с одним.</p>\n<p><span class=\"wrapper-with-dottes\"><code>.orange</code></span><code class=\"specifity\">0,0,<b>1</b>,0</code> — селектор с классом весит больше, чем селектор с тегом.</p>\n<p><span class=\"wrapper-with-dottes\"><code>.orange A SPAN</code></span><code class=\"specifity\">0,0,<b>1</b>,<b>2</b></code> — селектор перевесит предыдущий, потому что помимо класса содержит два тега.</p>\n<p><span class=\"wrapper-with-dottes\"><code>#page .orange</code></span><code class=\"specifity\">0,<b>1</b>,<b>1</b>,0</code> — селектор с ID перевесит всё, кроме inline-стилей.</p>\n<p>Теперь сравним селекторы из исходного примера:</p>\n<p><span class=\"wrapper-with-dottes\"><code>#container A</code></span><code class=\"specifity\">0,<b>1</b>,0,<b>1</b></code></p>\n<p><span class=\"wrapper-with-dottes\"><code>.list A</code></span><code class=\"specifity\">0,0,<b>1</b>,<b>1</b></code></p>\n<p><code class=\"specifity\">0,<b>1</b>,0,<b>1</b></code> <b>></b> <code class=\"specifity\">0,0,<b>1</b>,<b>1</b></code>  — хорошо видно, что селектор с ID весит больше, чем селектор с классом, поэтому все ссылки имеют оранжевый фон, хотя ниже в коде им задан зеленый.</p>\n<h2 id=\"solutions\">Варианты решений</h2>\n<p><b>1.</b> Добавить <code>!important</code></p>\n<div class=\"gatsby-highlight\" data-language=\"css\"><pre class=\"language-css\"><code class=\"language-css\"><span class=\"token selector\">#container A</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">background</span><span class=\"token punctuation\">:</span> orange<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token selector\">.list A</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">background</span><span class=\"token punctuation\">:</span> mediumspringgreen <span class=\"token important\">!important</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Ссылки получат зеленый фон, быстро и легко.\nНо это плохой способ, потому что код запутывается ещё больше.\nСо временем для переопределения <code>!important</code> в одном месте может потребоваться добавить его в других местах. Иерархичность начнет работать не сверху низ и от общего к частному, а как попало. В конце-концов поддерживать такой код будет весьма проблематично.</p>\n<p>В общих случаях использовать <code>!important</code> не рекомендуется, но может пригодиться, если нужно, чтобы часто используемый блок на всех страницах выглядел одинаково, независимо от окружения.\nВ любом случае нужно всегда четко понимать зачем вы его используете.</p>\n<p><b>2.</b> Следующий очевидный способ — добавить <code>#container</code> ко второму селектору, чтобы увеличить его вес:</p>\n<div class=\"gatsby-highlight\" data-language=\"css\"><pre class=\"language-css\"><code class=\"language-css\"><span class=\"token selector\">#container A</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">background</span><span class=\"token punctuation\">:</span> orange<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token selector\">#container .list A</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">background</span><span class=\"token punctuation\">:</span> mediumspringgreen<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Это тоже сработает, но решение так себе: удлиняется цепочка селекторов (что может отразиться на скорости отрисовки страницы) и ухудшается читаемость кода.\nТак тоже делать не стоит.</p>\n<p>1-й и 2-й способ могут использоваться, если у вас нет доступа к разметке, а в ней нет нужных классов.\nЕсли же вы можете редактировать разметку либо классы у элементов таки есть — используйте последний способ, самый правильный:</p>\n<p><b>3.</b> Просто не используйте в стилях селекторы с ID, используйте классы.</p>\n<p>Посмотрим на разницу между <code>#container</code> и с <code>.container</code>:</p>\n<p><span class=\"wrapper-with-dottes\"><code>#container A</code></span><code class=\"specifity\">0,<b>1</b>,0,<b>1</b></code> — селектор с ID перевешивает всё вне зависимости от своего расположения в коде.</p>\n<p>Заменим в разметке страницы <code>id</code> на <code>class</code>:</p>\n<p><span class=\"wrapper-with-dottes\"><code>.container A</code></span><code class=\"specifity\">0,0,<b>1</b>,<b>1</b></code> — селектор с классом весит меньше, он менее специфичен.</p>\n<p>Селектор ссылок в списке весит столько же:</p>\n<p><span class=\"wrapper-with-dottes\"><code>.list A</code></span><code class=\"specifity\">0,0,<b>1</b>,<b>1</b></code></p>\n<p>Это означает, что при равном весе селекторов применятся стили, объявленные ниже в коде.\nТо есть достаточно будет просто написать стили, следуя от общего к частному, сверху вниз.</p>\n<p>В итоге разметка может быть такой:</p>\n<div class=\"gatsby-highlight\" data-language=\"markup\"><pre class=\"language-markup\"><code class=\"language-markup\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>container<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a</span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>#<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>link in P<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span>\n\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>ul</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>list<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a</span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>#<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>Link1<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a</span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>#<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>Link2<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>ul</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>А стили — такими:</p>\n<div class=\"gatsby-highlight\" data-language=\"css\"><pre class=\"language-css\"><code class=\"language-css\"><span class=\"token selector\">.container A</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">background</span><span class=\"token punctuation\">:</span> orange<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token selector\">.list A</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">background</span><span class=\"token punctuation\">:</span> mediumspringgreen<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>И код работает так, как ожидается:</p>\n<iframe class=\"live-snippet\" style=\"height: 300px\" src=\"../assets/demo/specifity/demo_4.html?output\"></iframe>\n<p><i>Если <code>id</code> в вашей разметке уже используется в Js, логичнее будет добавить элементу класс и перевесить стили на него. Если же <code>id</code> участвует только в разметке — лучше заменить его на <code>class</code>.</i></p>\n<p>В качестве общих рекомендаций так же следует упомянуть, что нужно как можно меньше использовать селекторы по тегу и как можно больше — селекторы по классу. Это поможет избежать проблем при повторном использовании блоков сайта, а при использовании \"умных\" классов — может значительно сократить цепочки селекторов, увеличить читабельность кода и скорость отрисовки страницы.</p>\n<p>Спецификации:</p>\n<ul>\n<li><a href=\"http://www.w3.org/TR/CSS2/cascade.html#specificity\">w3.org/TR/CSS2/cascade.html#specificity</a></li>\n<li><a href=\"http://www.w3.org/TR/css3-selectors/#specificity\">w3.org/TR/css3-selectors/#specificity</a></li>\n</ul>","frontmatter":{"title":"Сколько весят селекторы?","desc":"Все CSS-селекторы имеют свой вес, который определяет как взаимодействуют одинаковые свойства, заданные в разных местах кода одному и тому же элементу.","image":"http://img-fotki.yandex.ru/get/9797/5091629.9a/0_7ec6f_cda36757_M.png","customCSS":"specifity.css","customJs":null,"tags":["selectors"],"layout":null,"links":[{"desc":null,"name":"Specifics on CSS Specificity","url":"http://css-tricks.com/specifics-on-css-specificity/"},{"desc":null,"name":"CSS Specificity: Things You Should Know","url":"http://coding.smashingmagazine.com/2007/07/27/css-specificity-things-you-should-know/"},{"desc":null,"name":"Специфичность в комиксах","url":"http://cssspecificity.com/"},{"desc":null,"name":"Специфичность на примере \"Звёздных войн\"","url":"http://www.stuffandnonsense.co.uk/archives/css_specificity_wars.html"}]}}},"pageContext":{"slug":"specifity","date":"03/01/2014","url":"/specifity","type":"post","includeContent":"","isArchived":false,"previous":{"frontmatter":{"title":"Символы юникода"},"fields":{"url":"/unicode","type":"post","isArchived":false}},"next":{"frontmatter":{"title":"Электронные часы. Css + Js."},"fields":{"url":"/digital-watch","type":"post","isArchived":false}}}}}