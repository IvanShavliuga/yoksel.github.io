{"componentChunkName":"component---src-templates-blog-post-js","path":"/list-like-tree","result":{"data":{"markdownRemark":{"html":"<p>Как-то мне потребовалось сделать иерархическое представление структуры проекта, для реализации был выбран CSS.</p>\n<!--more-->\n<p>Вот что получилось:</p>\n<iframe class=\"live-snippet\" style=\"height: 550px\" src=\"../assets/demo/list-like-tree/demo_1.html?output\"></iframe>\n<p>Это можно сделать за несколько простых шагов.</p>\n<p>Для начала создаем желаемую структуру из вложенных списков и заголовков для них:</p>\n<iframe class=\"live-snippet\" style=\"height: 550px\" src=\"../assets/demo/list-like-tree/demo_2.html?html\"></iframe>\n<p>Узлы уровней создаются с помощью заголовков H1 — H6. То есть перед каждым новым ветвлением должен быть заголовок. Чтобы они все вели себя одинаково c точки зрения древовидного списка, добавляем им общий класс <code>.header</code>.</p>\n<p>Добавляем отступы и рамки, чтобы видеть структуру.</p>\n<iframe class=\"live-snippet\" style=\"height: 550px\" src=\"../assets/demo/list-like-tree/demo_3.html?css\"></iframe>\n<p>И вот теперь самое интересное: добавляем полоски, начнем с горизонтальных.</p>\n<div class=\"gatsby-highlight\" data-language=\"css\"><pre class=\"language-css\"><code class=\"language-css\"><span class=\"token selector\">LI:before,\n.header:before</span><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">content</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">;</span>\n  <span class=\"token property\">display</span><span class=\"token punctuation\">:</span> block<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">position</span><span class=\"token punctuation\">:</span> absolute<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">left</span><span class=\"token punctuation\">:</span> 0<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">bottom</span><span class=\"token punctuation\">:</span> .5em<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">width</span><span class=\"token punctuation\">:</span> 15px<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">height</span><span class=\"token punctuation\">:</span> 0<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">border-bottom</span><span class=\"token punctuation\">:</span> 1px solid #333<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Они сделаны абсолютно позиционированными псевдоэлементами. Здесь  можно было бы обойтись и <code>inline-block</code> с вертикальным выравниванием, но <code>position: absolute;</code> в сочетании с <code>bottom</code> позволит нам сделать вертикальные линии, направленные вверх.</p>\n<p>Чтобы полоски не выпадали из контекста, пунктам списка и заголовкам нужно задать относительное позиционирование, а чтобы они не заезжали на текст — паддинг слева тем же элементам.</p>\n<div class=\"gatsby-highlight\" data-language=\"css\"><pre class=\"language-css\"><code class=\"language-css\"><span class=\"token selector\">LI,\n.header</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">position</span><span class=\"token punctuation\">:</span> relative<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">padding-left</span><span class=\"token punctuation\">:</span> 1.2em<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<iframe class=\"live-snippet\" style=\"height: 550px\" src=\"../assets/demo/list-like-tree/demo_4.html?css\"></iframe>\n<p>Пока выглядит странно. Большинство полосок встало на места, но некоторые болтаются где попало, потому, что все горизонтальные линии спозиционированны относительно нижнего края элементов.</p>\n<p>Теперь добавим вертикальные линии:</p>\n<div class=\"gatsby-highlight\" data-language=\"css\"><pre class=\"language-css\"><code class=\"language-css\"><span class=\"token selector\">.header:last-of-type:before,\nLI:last-child:before</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">height</span><span class=\"token punctuation\">:</span> 1000px<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">border</span><span class=\"token punctuation\">:</span> 1px solid #333<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">border-width</span><span class=\"token punctuation\">:</span> 0 0 1px 1px\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Получится лес вертикальных линий, от которого легко избавиться, задав всем спискам <code>overflow: hidden;</code>, вот результат:</p>\n<iframe class=\"live-snippet\" style=\"height: 550px\" src=\"../assets/demo/list-like-tree/demo_5.html?output\"></iframe>\n<p>И теперь в структуре хорошо видно дублирование некоторых линий.</p>\n<p>Оно происходит из-за того, что заголовки (<code>.header</code>) находятся внутри элементов списка (<code>LI</code>), таким образом они получают две направляющих.</p>\n<p>Добавим спискам с заголовками класс <code>.p-has-headers</code> и покрасим разные направляющие разными цветами, чтобы увидеть что происходит.</p>\n<div class=\"gatsby-highlight\" data-language=\"css\"><pre class=\"language-css\"><code class=\"language-css\"><span class=\"token selector\">.p-has-headers > LI:before</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">border-color</span><span class=\"token punctuation\">:</span> red<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token selector\">.header:before,\n.header:last-of-type:before</span><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">border-color</span><span class=\"token punctuation\">:</span> green<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Направляющие обычных пунктов списка остались черными, направляющие списков с заголовками стали красными, направляющие заголовков — зелеными.</p>\n<iframe class=\"live-snippet\" style=\"height: 550px\" src=\"../assets/demo/list-like-tree/demo_6.html?output\"></iframe>\n<p>По красным хорошо видно, что некоторые из них находятся не там. Например, на крайней слева вертикали горизонтальные линии совсем мимо, потому, что линии спозиционированы от нижнего края <code>LI</code>.</p>\n<p>Это отлично работает в простом списке, но совсем не подходит для списка с заголовком, потому что в этом случае ветка должна начинаться на уровне заголовка, как это делают зеленые.</p>\n<p>Именно поэтому стили прописывались и для <code>LI</code>, и для <code>.header</code>. Если есть заголовок — ветка вверх должна вести от него, а не от конца списка. Таким образом, в списках, пункты которого содержат заголовки и которые мы пометили классом <code>.p-has-headers</code>, можно выключить направляющие для непосредственных наследников кодом вроде <code>UL > LI</code>.</p>\n<p>Код:</p>\n<div class=\"gatsby-highlight\" data-language=\"css\"><pre class=\"language-css\"><code class=\"language-css\"><span class=\"token selector\">.p-has-headers > LI:before</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">content</span><span class=\"token punctuation\">:</span> none<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Результат:</p>\n<iframe class=\"live-snippet\" style=\"height: 550px\" src=\"../assets/demo/list-like-tree/demo_1.html?output\"></iframe>\n<p>Получилась довольно простая конструкция, главное — не запутаться в тегах списков, и каждую новую ветку начинать с заголовка.</p>","frontmatter":{"title":"Древовидный список на CSS","desc":"Как-то мне потребовалось сделать иерархическое представление структуры проекта, для реализации был выбран CSS.","image":"http://img-fotki.yandex.ru/get/9895/5091629.9a/0_7ec7b_511301f7_M.png","customCSS":null,"customJs":null,"tags":["experiments"],"layout":null,"links":null}}},"pageContext":{"slug":"list-like-tree","date":"27/11/2013","url":"/list-like-tree","type":"post","includeContent":"","isArchived":false,"previous":{"frontmatter":{"title":"Css-селекторы, часть 2"},"fields":{"url":"/css-selectors-part2","type":"post","isArchived":false}},"next":{"frontmatter":{"title":"Текстовые эффекты"},"fields":{"url":"/text-effects","type":"post","isArchived":false}}}}}