{"componentChunkName":"component---src-templates-blog-post-js","path":"/animated-svg-mask","result":{"data":{"markdownRemark":{"html":"<p>В <a href=\"/svg-stroke\">прошлой статье</a> я рассматривала странности SVG-обводки, а также возможность сделать анимированные маски.</p>\n<p>Так как трансформации в масках не анимируются в Firefox (31-я версия на момент написания статьи), я продолжила эксперименты с обводками. <!--more--></p>\n<div class=\"post__warning\">В посте много демо с анимацией, страница может подтормаживать на слабых устройствах.</div>\n<p>Обводками можно в какой-то степени имитировать трансформации в масках, и, таким образом, получить много разных интересных эффектов.</p>\n<p>Пример простой маски:</p>\n<iframe height=\"400\"\n      style=\"width: 100%\"\n      title=\"no title\"\n      src=\"http://codepen.io/yoksel/embed/hatEx/?&default-tab=result\"\n    ></iframe>\n<p>Как она устроена?</p>\n<p>SVG:</p>\n<div class=\"gatsby-highlight\" data-language=\"markup\"><pre class=\"language-markup\"><code class=\"language-markup\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>mask</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>m-lines<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>line</span> <span class=\"token attr-name\">x1</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>0<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">y1</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>0<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">x2</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>100%<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">y2</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>100%<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>elem-mask<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>line</span> <span class=\"token attr-name\">x1</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>0<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">y1</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>100%<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">x2</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>100%<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">y2</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>0%<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>elem-mask<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>mask</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>Внутри две линии. Я не использовала <code>path</code>, потому что ему нельзя задать координаты в процентах.</p>\n<p>CSS для линий:</p>\n<div class=\"gatsby-highlight\" data-language=\"css\"><pre class=\"language-css\"><code class=\"language-css\">$<span class=\"token property\">mask-time</span><span class=\"token punctuation\">:</span> 7s<span class=\"token selector\">;\n\n.elem-mask</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">stroke</span><span class=\"token punctuation\">:</span> #FFF<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">stroke-width</span><span class=\"token punctuation\">:</span> 0<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">animation</span><span class=\"token punctuation\">:</span> stroke-width $mask-time infinite<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token atrule\"><span class=\"token rule\">@keyframes</span> stroke-width</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token selector\">50%</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token property\">stroke-width</span><span class=\"token punctuation\">:</span> 300<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>В исходном состоянии линии не видны, потому что <code>stroke-width: 0</code>. Для того, чтобы обводки в процессе анимации служили видимой областью маски, им задан белый цвет <code>stroke: #FFF</code>. Также задана анимация, которая увеличивает толщину рамки до 300.</p>\n<p>Если вытащить маску наружу, она будет выглядеть вот так:</p>\n<iframe height=\"400\"\n      style=\"width: 100%\"\n      title=\"no title\"\n      src=\"http://codepen.io/yoksel/embed/CbDFK/?&default-tab=result\"\n    ></iframe>\n<p>Отображается только то, что попадает под белые области. Линии увеличиваются за счет обводки и показывают содержимое под собой.</p>\n<p>Маска применяется к фигуре с помощью атрибута <code>mask=\"url(#m-line)\"</code> или через CSS: <code>mask: url(#m-line);</code></p>\n<p>Понимая принцип работы такой маски, можно сделать много других вариантов.</p>\n<p>Простое разворачивание из центра:</p>\n<iframe height=\"400\"\n      style=\"width: 100%\"\n      title=\"no title\"\n      src=\"http://codepen.io/yoksel/embed/sktnE/?&default-tab=result\"\n    ></iframe>\n<p>И под углом:</p>\n<iframe height=\"400\"\n      style=\"width: 100%\"\n      title=\"no title\"\n      src=\"http://codepen.io/yoksel/embed/IBxJt/?&default-tab=result\"\n    ></iframe>\n<p>Использование паттернов позволяет делать узорные маски.</p>\n<p>Клеточки:</p>\n<iframe height=\"400\"\n      style=\"width: 100%\"\n      title=\"no title\"\n      src=\"http://codepen.io/yoksel/embed/xAybm/?&default-tab=result\"\n    ></iframe>\n<p>Ромбики:</p>\n<iframe height=\"400\"\n      style=\"width: 100%\"\n      title=\"no title\"\n      src=\"http://codepen.io/yoksel/embed/cHFJw/?&default-tab=result\"\n    ></iframe>\n<p>Паттерны позволяют добиться интересного результата минимумом фигур, но ещё интереснее можно сделать, если задать несколько фигур внутри маски и анимировать их по отдельности.</p>\n<iframe height=\"400\"\n      style=\"width: 100%\"\n      title=\"no title\"\n      src=\"http://codepen.io/yoksel/embed/dCFrG/?&default-tab=result\"\n    ></iframe>\n<p>При этом пути в маске вовсе не обязательно должны быть прямыми линиями:</p>\n<iframe height=\"400\"\n      style=\"width: 100%\"\n      title=\"no title\"\n      src=\"http://codepen.io/yoksel/embed/cxkDi/?&default-tab=result\"\n    ></iframe>\n<p>Да и вообще, необязательно это должны быть линии:</p>\n<iframe height=\"400\"\n      style=\"width: 100%\"\n      title=\"no title\"\n      src=\"http://codepen.io/yoksel/embed/HvLzE/?&default-tab=result\"\n    ></iframe>\n<p>Помимо преимуществ, анимированные SVG-маски имеют некоторые проблемы. Связаны они не столько с масками, сколько с анимацией. Во-первых, анимации SVG-элементов не поддерживаются в IE. Вторая проблема — производительность. Насколько мне известно, на данный момент анимации SVG-элементов не оптимизируются браузерами, поэтому имеет смысл анимированный SVG применять умеренно и аккуратно.</p>\n<p>Мне не приходилось использовать подобные маски в практических целях, но предполагаю, что с их помощью можно будет делать эффектные слайдеры и фотогалереи.</p>\n<p>Паттерны <a href=\"http://www.colourlovers.com/lover/yoksel\">отсюда</a>.</p>","frontmatter":{"title":"Анимированные SVG-маски","desc":"В прошлой статье я рассматривала странности SVG-обводки, а также возможность сделать анимированные маски. Так как трансформации в масках не анимируются в Firefox (31-я версия на момент написания статьи), я продолжила эксперименты с обводками.","image":"//img-fotki.yandex.ru/get/6733/5091629.a1/0_84885_3d02703a_orig","customCSS":null,"customJs":null,"tags":["svg","animation","patterns"],"layout":null,"links":[{"desc":null,"name":"Css Animation","url":"/css-animation/"},{"desc":null,"name":"CSS и SVG маски","url":"/css-and-svg-masks/"},{"desc":null,"name":"Странности обводки в SVG","url":"/svg-stroke/"},{"desc":null,"name":"SVG: полезные ссылки","url":"/pages/svg-links/"}]}}},"pageContext":{"slug":"animated-svg-mask","date":"10/08/2014","url":"/animated-svg-mask","type":"post","includeContent":"","isArchived":false,"previous":{"frontmatter":{"title":"Странности обводки в SVG"},"fields":{"url":"/svg-stroke","type":"post","isArchived":false}},"next":{"frontmatter":{"title":"CSS-анимации для ротации изображений"},"fields":{"url":"/css-animation-algorithms","type":"post","isArchived":false}}}}}