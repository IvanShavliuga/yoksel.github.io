---
layout: default
title: Оживляем текст
type: post
image:
desc:

---

Эта статья написана по следам доклада, который я рассказывала в Новосибирске, Москве и Санкт-Петербурге. А сам доклад стал результатом увлекательных экспериментов с возможностями оформления текста.

Что вообще можно сделать с текстом?<!--more--> Все знают, что ему можно задать цвет, размер, шрифт, начертание, добавить тень... Но, если подумать, у HTML-элементов возможностей несколько больше: им можно задать рамки, более сложные и интересные <a href="/box-shadow">тени</a>, для них можно использовать любые заливки — хоть <a href="/linear-gradients">градиентом</a>, хоть картинкой.

Возможности текста на этом фоне выглядят бледновато. И что делать, если вам таки нужно залить текст картинкой или добавить обводку? Делать текст картинкой плохой вариант, потому что, во-первых, такой текст теряет в доступности, во-вторых, конструкция весит больше обычного текста.

Мне стало интересно что мы можем сделать с обычным текстом используя привычнуе инструменты вроде CSS и SVG. Я провела несколько экспериментов, и собираюсь рассказать о результатах.

Были испробованы разные способы добавить тексту обводку или залить его паттерном. Так как я люблю, чтобы всё шевелилось, для каждого способа исследовались возможности анимации.

Также при любых способах текст остается текстом. И это здорово, потому что какой бы из предложенных способов вы не выбрали, вам не придется совершать дополнительных телодвижений, чтобы сохранить текст доступным — в большинстве случаев это будет самый обычный текст, который можно выделить и скопировать.

Начнем мы с возможностей CSS и для начала познакомимся с обводками.

Если вы когда-либо пробовали делать обводки для текста, наверняка вы использовали <code>text-shadow</code>.

[демо]

Тонкая обводка работает замечательно, но стоит сделать её потолще - и начинаются проблемы.

[demo]

такая простая на вид обводка имеет довольно громоздкий код:

[code]

Что если вы захотите поменять цвет обводки или ещё толщину? Лучше даже не думать об этом.
Впрочем, если вы когда-либо использовали CSS-препроцессоры, наверняка вам будет лень писать руками код из примера выше, и в случае необходимости вы первым делом напишете функцию, которая будет делать всё за вас. Моя функция выглядит вот так:

[code]

Конечно, это тоже колбаса кода, но она позволяет легко менять цвет и размер обовдки.

В общем, для того, чтобы сделать обводку с помощью text-shadow вам в любом случае потребуется довольно громоздкий код, да и возможности такой обводки несколько ограничены.

Но в защиту text-shadow следует сказать, что с помощью этого свойства можно делать не только обводки, но и разные другие интересные эффекты. Например, растворяющийся текст:

[  demo     ]

Конечно, этот эффект можно повторить с помощью фильтров и трансформаций, но в этом примере он сделан с использованием одного лишь text-shadow и, в качестве бонуса, имеет большую поддержку браузерами [    ПРОВЕРИТЬ анимации и прочее   ].

Также с помощью text-shadow можно делать псевдо-объемный текст:

[   demo    ]

А ещё несколько интересных эффектов на основе text-shadow предлагает сервис Google Fonts. Как работает этот сервис? Вы находите подходящий шрифт, копируете на свою страницу код для вставки и после этого в стилях страницы можете использовать шрифт, подключенный таким образом.

Ссылка на шрифт может содержать разные параметры, например, начертания:

http://fonts.googleapis.com/css?family=Roboto+Condensed:<mark>300,400</mark>

И наборы символов:

http://fonts.googleapis.com/css?family=Roboto+Condensed:400,300<mark>&subset=latin,cyrillic</mark>

Там же подключаются эффекты для текста:

http://fonts.googleapis.com/css?family=Roboto+Condensed:400,300&subset=latin,cyrillic<mark>&effect=3d</mark>

После этого вам надо будет добавить на страницу элемент с классом для эффекта:

<pre><code class="language-markup">&lt;div class="font-effect-3d">текст&lt;/div></code></pre>

Сервис гугла предлагает много эффектов на основе <code>text-shadow</code>:

[    demo    ]

Больше информации и таблицу со списком всех доступных эффектов можно найти тут: https://developers.google.com/fonts/docs/getting_started#Effects.

В таблице с эффектами нужно обратить внимание на последнюю колонку — Support, она содержимт информацию о поддержке браузерами. Не все эффекты одинаково хорошо поддерживаются, лучше всего поддержка у эффектов на осное теней.

Вернемся к <code>text-sahdow</code>. С одной стороны, возможности теней для текста несколько ограничены, с другой — они хорошо поддерживается современными браузерами, и их вполне можно использовать как для простых обводок, так и <a href="/text-effects/">разных интересных спецэффектов</a>.

[    browsers    ]

Но <code>text-sahdow</code> — не единственный способ сделать обводку, такую же возможность нам дает свойство <code>-webkit-text-stroke</code>.

Код такой обводки изумительно лаконичен:

<pre><code class="language-css">-webkit-text-stroke: 15px orangered</code></pre>

В одной строчке можно задать цвет и толщину, и получить аккуратную обводку любой толщины:

<p data-height="400" data-theme-id="4974" data-slug-hash="YXdMYx" data-default-tab="result" data-user="yoksel" class='codepen'>See the Pen <a href='http://codepen.io/yoksel/pen/YXdMYx/'>YXdMYx</a> by yoksel (<a href='http://codepen.io/yoksel'>@yoksel</a>) on <a href='http://codepen.io'>CodePen</a>.</p>
<script async src="//assets.codepen.io/assets/embed/ei.js"></script>

К сожалению, <code>-webkit-text-stroke</code> поддерживается не всеми браузерами: только вебкиты и только с префиксом.

[    browsers    ]

Теперь посмотрим на возможности заливки. Если вы когда-либо пробовали сделать заливки для текста, скорее всего, вы уже использовали свойство <code>-webkit-background-clip: text</code>.

Чтобы увидеть его в действии, нам потребуется три строчки кода и браузер на Webkit.

Код:

<pre><code class="language-css">.text {
    /* Добавляем фон */
    background: url(./assets/img/parts/tulips.jpeg) 50% 50%;
    /* Обрезаем фон по контуру теста */
    -webkit-background-clip: text;
    /* Делаем текст прозрачным */
    -webkit-text-fill-color: transparent;
    }</code></pre>

<p data-height="268" data-theme-id="4974" data-slug-hash="NqemMe" data-default-tab="result" data-user="yoksel" class='codepen'>See the Pen <a href='http://codepen.io/yoksel/pen/NqemMe/'>NqemMe</a> by yoksel (<a href='http://codepen.io/yoksel'>@yoksel</a>) on <a href='http://codepen.io'>CodePen</a>.</p>
<script async src="//assets.codepen.io/assets/embed/ei.js"></script>

К сожалению, в браузерах без поддержки демо будет выглядеть вот так:

[    скрин    ]

Жаль, потому что свойство позволяет делать много интересного. Например, залить каждую строчку текста своим цветом или сделать текст, уходящий в прозрачность:

[    демо    ]

Посмотрим на возможности анимации заливки. Это может выглядеть, например, так:

[    демо    ]

В качестве заливки используется обычный CSS-фон, что накладывает на анимацию некоторые ограничения. Мы можем плавно менять размер или положение фона, но плавно менять его содержимое, к сожалению, не получится.

В своем демо я использовала паттерн на основе CSS-градиентов, и было бы очень удобно в шагах анимации задать плавное изменение цветов или даже узора, но увы — это не работает. [ ПРОВЕРИТЬ ] В вебкитах градиент анимируется скачками, в Firefox не анимируется вообще.

Впрочем, если достаточно анимировать всего один цвет, можно использовать ключевое слово <code>currentColor</code> — оно обозначает текущий цвет текста. Если использовать его при создании градиента, а потом в шагах анимации задать изменение цвета текста, цвет градиента будет меняться плавно и без скачков.

[    демо    ]

Поддержка браузерами для <code>-webkit-background-clip: text</code>: к сожалению, значение <code>text</code> для свойства <code>-webkit-background-clip</code> работает только в вебкитах и только с префиксом [ ПРОВЕРИТЬ префикс для остальных значений ].

Теперь посмотрим что нам может предложить SVG. SVG — это во всех отношениях замечательная технология. Во-первых, она очень неплохо поддерживается современными браузерами. Во-вторых, она несет в себе массу интересных возможностей (правда, подводных камней тоже хватает). В-третих, в SVG царит потрясающее равноправие по части оформления элементов: вы можете нарисовать векторный кружочек, добавить ему заливку и обводку, и затем точно такие же зиливку и обводку добавить к тексту — и это будет работать! С точки зрения SVG, текст — это такое же векторное содержимое, как и все остальные фигуры. И в-четветых, в SVG существует минимум 3 способа сделать текст с заливкой, я расскажу только про два. (МБ, потом дополнить про недостатки clip-path? нет рамки и всё такое)

Начнем с обычного текста. В SVG можно вставить текст, самый обычный текст, который можно выделить и скопировать:

[    демо    ]

Правда, код, будет немного громоздким:

[    код    ]

Попробуем оформить этот текст, и начнем с обводок. За обводки в SVG отвечает свойтсво <code>stroke</code>.

Его можно задать через атрибуты:

<pre><code class="language-markup">&lt;text stroke="crimson" stroke-width="3">текст&lt;/text></code></pre>

или в CSS:

<pre><code class="language-css">.text {
        stroke: crimson;
        stroke-width: 3;
        }</code></pre>


Результат будет выглядеть вот так:

[    демо    ]

Аккуратная обводка любой толщины.

Можно анимировать и толщину обводки, и её цвет:

[    демо    ]

Но, что ещё интереснее, в качестве обводки можно использовать не только сплошной цвет, но также градиент или паттерн, в том числе анимированный:

[    демо    ]

Кроме того, обводка может быть пунктирной, и, в отличие от CSS-свойства <code>border</code>, параметрами этого пунктира можно управлять — за это отвечает свойство <code>stroke-dasharray</code>.

<pre><code class="language-css">stroke: orangered;
stroke-width: 5;
<mark>stroke-dasharray: 50 30 20 10;</mark></code></pre>

[    демо    ]

Мы видим список из 4-х значений. На самом деле, достаточно одного — в этом случае значение будет определять и длину штрихов, и расстояния между ними. Если значения будет два, первое будет отвечать за длину штрихов, второе — за расстояние между ними. Список значений можно продолжать до бесконечности, создавая интересные варианты сложных обводок.

В дополнение к прочим своим замечательным возможностям, <code>stroke-dasharray</code> прекрасно анимируется. Таким образом можно сделать, например, бегущий пунктир:

[    демо    ]

Используя его же можно сделать текст, который рисуется на странице или постепенно стирается с неё:

[    демо    ]

Немного извернувшись, бегущий пунктир можно сделать разноцветным:

[    демо    ]

Возможность анимировать пунктирную обводку открывает массу интересных возможностей.

[    демо    ]

Теперь посмотрим на заливки: за них в SVG отвечает свойство <code>fill</code>.

Заливку можно задать как с помощью атрибута:

<pre><code class="language-markup">&lt;text fill="url(#gr-blue)">текст&lt;/text></code></pre>

так и через CSS:

<pre><code class="language-css">.text {
        fill: url(#gr-blue);
        }</code></pre>

Примеры заливок: цвет, градиент и паттерн.

[    демо    ]

Следует иметь в виду, что привычные CSS-фоны не работают в SVG, здесь для создания градиента или заливки картинкой потребуются свои собственные конструкции. Познакомимся с ними поближе, и начнем с градиентов.

Прежде чем использовать градиент для заливки, его сначала нужно объявить в коде страницы:

<pre><code class="language-markup">&lt;linearGradient id="gr-blue"
        x1="0" y1="0" x2="100%" y2="100%">
    &lt;stop stop-color="#9FD" offset="10%"/>
    &lt;stop stop-color="#190099" offset="90%"/>
&lt;/linearGradient></code></pre>

Внутри градиента задаются желаемые цвета и их положение внутри градиента. Интересно, что, в отличие от CSS-градиентов, цвета SVG-градиента можно анимировать. Например, с помощью CSS:

[    демо    ]

К сожалению, CSS позволяет анимировать только цвета. Для анимации остальных параметров потребуется SMIL-анимация. Она позволяет управлять практически всеми параметрами градиента, в этом примере я изменяю радиус градиента, за счет чего он появляется и исчезает:

[    демо    ]

К сожалению, SMIL-анимация не очень хорошо поддерживается браузерами. Например, IE не поддерживает её ни в одной из версий, а разработчики вебкит вообще подумывают от неё отказаться [ LINK ]. С одной стороны, это может лишить нас интересных возможностей анимации в SVG, с другой — если это как-то простимулирует развитие анимаций в CSS, все от этого только выиграют.

Теперь перейдем к паттернам. Перед использованием в качестве заливки их таккже нужно объявить на странице:

<pre><code class="language-markup">&lt;pattern id="pt-circles" width="40" height="40"
    viewBox="0 0 50 50" patternUnits="userSpaceOnUse">
        &lt;circle r="18" cx="25" cy="25" fill="yellowgreen"
            stroke="green" stroke-width="7"/>
&lt;/pattern></code></pre>

[    демо    ]

В этом примере паттерн внутри содержит только маленький зеленый кружок, но, вообще содержимое паттерна может состоять из нескольких фигур, и быть довольно сложным.

Содержимое паттерна может быть не только векторным, но и растровым, в этом случае внутрь паттерна кладется обычная картинка:

<pre><code class="language-markup">&lt;pattern id="pt-wooden" width="300" height="300"
    patternUnits="userSpaceOnUse">
        &lt;image xlink:href="./assets/img/parts/wood.jpg"
            width="300" height="300"/>
&lt;/pattern></code></pre>

А результат применения очень похож на привычный CSS-фон:

[    демо    ]

Применительно к тексту паттерн будет выглядеть вот так:

[    демо    ]

Таким образом? легким движением руки и парой строчек кода мы можем сделать текст залитый картинкой, и это будет работать во всех современных браузерах (IE9+).

Сочетая заливки и обводки можно делать разные интересные штуки:

[    демо    ]

И даже, если вдруг очень нужно, вы можете залить текст текстом:

[    демо    ]

В этом случае внутрь паттерна кладется текст, цвет, размер и шрифт текста можно задать в помощью CSS.

Посмотрим на возможности анимации такой заливки. Анимации в паттернах работают, но имеют некоторые огранижения: например, анимированные трансформации не работают в Firefox [ ПРОВЕРИТЬ ]. Но мы всё ещё можем анимировать заливки и обводки фигур.

В этом демо я сделала паттерн из квадратиков и с помощью CSS-анимаций меняю им цвет заливки:

[    демо    ]

Если всё-таки очень хочется менять размер фигур, можно попробовать анимировать обводку. В этом демо не меняется размер фигур, изменяется только толщина обводки, но визуально всё выглядит так, как будто кружки уменьшаются и увеличиваются:

[    демо    ]

Для простых фигур этот трюк вполне может сработать.

[    демо    ]

Ну и если вам мало возможностей анимаций в паттернах, вы всегда можете положить в паттерн анимированный гиф, и получить что-нибудь интересное:

[    демо    ]

Кроме того, содержимое паттерна можно анимировать с помощью JS, и это может довольно сильно расширить как возможности анимации, так и количество поддерживаемых браузеров.

[    демо    ] hello text

Теперь рассмотрим второй способ сделать текст с заливкой используя SVG: это SVG-маски.

Что такое маска? Это чёрно-белая картинка, которая накладывается на другую картинку и темные и светлые области маски определяют какие части нижележащей картинки будут показаны, а какие скрыты. В фотошопе маски чёрно-белые, в SVG могут быть цветными, но цвет содержимого не имеет значения, роль играет только яркость. То, что попало под темные области, будет скрыто, то, что под светлые — показано.

Чтобы воспользоваться SVG-маской, для начала нужно создать соответствующий элемент в коде страницы:

[    код    ]

Так как мне нужно обрезать SVG-содержимое по контуру текста, я внутрь маски кладу текст. Вообще содержимое маски может быть любым: помимо текста это могут быть также и векторные фигуры, и растровые изображения, что открывает массу интересных возможностей. Но вернёмся к тексту. Код маски с текстом выглядит вот так:

[    код    ]

По умолчанию маска не отображается на странице, но если вынуть её содержимое наружу, там будет такое:

[    демо    ]

Белый текст на чёрном фоне. Такая маска обрежет всё, кроме текста. В действии это выглядит вот так:

[    демо    ]



[    демо    ]

[    демо    ]

[    демо    ]

[    демо    ]

[    демо    ]

[    демо    ]

[    демо    ]













